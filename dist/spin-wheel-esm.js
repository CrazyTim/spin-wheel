/**
 * spin-wheel (ESM) v3.4.1
 * https://github.com/CrazyTim/spin-wheel#readme
 * Copyright (c) CrazyTim 2023.
 * Distributed under the MIT License.
 */
var q=Object.create;var p=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,$=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var f=Math.pow,L=(t,e,i)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,_=(t,e)=>{for(var i in e||(e={}))S.call(e,i)&&L(t,i,e[i]);if(I)for(var i of I(e))U.call(e,i)&&L(t,i,e[i]);return t};var G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var J=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Y(e))!S.call(t,s)&&s!==i&&p(t,s,{get:()=>e[s],enumerable:!(n=X(e,s))||n.enumerable});return t};var K=(t,e,i)=>(i=t!=null?q($(t)):{},J(e||!t||!t.__esModule?p(i,"default",{value:t,enumerable:!0}):i,t));var W=G(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.linear=te;l.easeInSine=ie;l.easeOutSine=ne;l.easeInOutSine=se;l.easeInQuad=re;l.easeOutQuad=ae;l.easeInOutQuad=oe;l.easeInCubic=he;l.easeOutCubic=le;l.easeInOutCubic=ue;l.easeInQuart=de;l.easeOutQuart=ge;l.easeInOutQuart=me;l.easeInQuint=ce;l.easeOutQuint=fe;l.easeInOutQuint=_e;l.easeInExpo=be;l.easeOutExpo=ve;l.easeInOutExpo=pe;l.easeInCirc=Ce;l.easeOutCirc=Re;l.easeInOutCirc=Ie;l.easeInBack=Le;l.easeOutBack=Se;l.easeInOutBack=ye;l.easeInElastic=Me;l.easeOutElastic=we;l.easeInOutElastic=xe;l.easeOutBounce=C;l.easeInBounce=F;l.easeInOutBounce=Ae;function te(t){return t}function ie(t){return-1*Math.cos(t*(Math.PI/2))+1}function ne(t){return Math.sin(t*(Math.PI/2))}function se(t){return-.5*(Math.cos(Math.PI*t)-1)}function re(t){return t*t}function ae(t){return t*(2-t)}function oe(t){return t<.5?2*t*t:-1+(4-2*t)*t}function he(t){return t*t*t}function le(t){var e=t-1;return e*e*e+1}function ue(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}function de(t){return t*t*t*t}function ge(t){var e=t-1;return 1-e*e*e*e}function me(t){var e=t-1;return t<.5?8*t*t*t*t:1-8*e*e*e*e}function ce(t){return t*t*t*t*t}function fe(t){var e=t-1;return 1+e*e*e*e*e}function _e(t){var e=t-1;return t<.5?16*t*t*t*t*t:1+16*e*e*e*e*e}function be(t){return t===0?0:Math.pow(2,10*(t-1))}function ve(t){return t===1?1:-Math.pow(2,-10*t)+1}function pe(t){if(t===0||t===1)return t;var e=t*2,i=e-1;return e<1?.5*Math.pow(2,10*i):.5*(-Math.pow(2,-10*i)+2)}function Ce(t){var e=t/1;return-1*(Math.sqrt(1-e*t)-1)}function Re(t){var e=t-1;return Math.sqrt(1-e*e)}function Ie(t){var e=t*2,i=e-2;return e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-i*i)+1)}function Le(t){var e=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],i=t/1;return i*i*((e+1)*i-e)}function Se(t){var e=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],i=t/1-1;return i*i*((e+1)*i+e)+1}function ye(t){var e=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],i=t*2,n=i-2,s=e*1.525;return i<1?.5*i*i*((s+1)*i-s):.5*(n*n*((s+1)*n+s)+2)}function Me(t){var e=arguments.length<=1||arguments[1]===void 0?.7:arguments[1];if(t===0||t===1)return t;var i=t/1,n=i-1,s=1-e,r=s/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*n)*Math.sin((n-r)*(2*Math.PI)/s))}function we(t){var e=arguments.length<=1||arguments[1]===void 0?.7:arguments[1],i=1-e,n=t*2;if(t===0||t===1)return t;var s=i/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/i)+1}function xe(t){var e=arguments.length<=1||arguments[1]===void 0?.65:arguments[1],i=1-e;if(t===0||t===1)return t;var n=t*2,s=n-1,r=i/(2*Math.PI)*Math.asin(1);return n<1?-.5*(Math.pow(2,10*s)*Math.sin((s-r)*(2*Math.PI)/i)):Math.pow(2,-10*s)*Math.sin((s-r)*(2*Math.PI)/i)*.5+1}function C(t){var e=t/1;if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75){var i=e-.5454545454545454;return 7.5625*i*i+.75}else if(e<2.5/2.75){var n=e-.8181818181818182;return 7.5625*n*n+.9375}else{var s=e-.9545454545454546;return 7.5625*s*s+.984375}}function F(t){return 1-C(1-t)}function Ae(t){return t<.5?F(t*2)*.5:C(t*2-1)*.5+.5}});function y(t=0,e=0){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}function M(t=0,e=0,i=14){return parseFloat((Math.random()*(e-t)+t).toFixed(i))}function u(t=0){return t*Math.PI/180}function x(t,e,i){return e<i?e<=t&&t<i:e<=t||t<i}function A(t,e,i,n){n.save(),n.font=`1px ${e}`;let s=n.measureText(t).width;return n.restore(),i/s}function E(t={x:0,y:0},e,i,n){return f(t.x-e,2)+f(t.y-i,2)<=f(n,2)}function b(t={x:0,y:0},e={},i=1){let n=e.getBoundingClientRect();return{x:(t.x-n.left)*i,y:(t.y-n.top)*i}}function T(t,e,i,n){let s=t-i,r=e-n,a=Math.atan2(-r,-s);return a*=180/Math.PI,a<0&&(a+=360),a}function N(t=0,e=0){let i=t+e,n;return i>0?n=i%360:n=360+i%360,n===360&&(n=0),n}function O(t=0,e=0){let i=180-e;return 180-N(t,i)}function c(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function P(t){return Math.sin(t*Math.PI/2)}var V=Object.freeze({left:"left",right:"right",center:"center"}),o=Object.freeze({wheel:{borderColor:"#000",borderWidth:1,debug:!1,image:null,isInteractive:!0,itemBackgroundColors:["#fff"],itemLabelAlign:V.right,itemLabelBaselineOffset:0,itemLabelColors:["#000"],itemLabelFont:"sans-serif",itemLabelFontSizeMax:500,itemLabelRadius:.85,itemLabelRadiusMax:.2,itemLabelRotation:0,items:[],lineColor:"#000",lineWidth:1,pixelRatio:0,radius:.95,rotation:0,rotationResistance:-35,rotationSpeed:0,rotationSpeedMax:250,offset:{w:0,h:0},onCurrentIndexChange:null,onRest:null,onSpin:null,overlayImage:null,pointerAngle:0},item:{backgroundColor:null,image:null,imageRadius:.5,imageRotation:0,imageScale:1,label:"",labelColor:null,labelFont:null,weight:1}}),m=Object.freeze({pointerLineColor:"#ff00ff",labelOutlineColor:"#ff00ff",labelRadiusColor:"#00ff00",dragEventHue:200});function k(t={}){let e=t.canvas;t._handler_onPointerMoveRefreshCursor=(n={})=>{let s={x:n.clientX,y:n.clientY};t.isCursorOverWheel=t.wheelHitTest(s),t.refreshCursor()},t._handler_onMouseMoveRefreshCursor=(n={})=>{let s={x:n.clientX,y:n.clientY};t.isCursorOverWheel=t.wheelHitTest(s),t.refreshCursor()},t._handler_onPointerDown=(n={})=>{let s={x:n.clientX,y:n.clientY};if(!t.isInteractive||!t.wheelHitTest(s))return;n.preventDefault(),t.dragStart(s),e.setPointerCapture(n.pointerId),e.addEventListener("pointermove",r),e.addEventListener("pointerup",a),e.addEventListener("pointercancel",a);function r(h={}){h.preventDefault(),t.dragMove({x:h.clientX,y:h.clientY})}function a(h={}){h.preventDefault(),e.releasePointerCapture(h.pointerId),e.removeEventListener("pointermove",r),e.removeEventListener("pointerup",a),e.removeEventListener("pointercancel",a),t.dragEnd()}},t._handler_onMouseDown=(n={})=>{let s={x:n.clientX,y:n.clientY};if(!t.isInteractive||!t.wheelHitTest(s))return;t.dragStart(s),document.addEventListener("mousemove",r),document.addEventListener("mouseup",a);function r(h={}){h.preventDefault(),t.dragMove({x:h.clientX,y:h.clientY})}function a(h={}){h.preventDefault(),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",a),t.dragEnd()}},t._handler_onTouchStart=(n={})=>{let s={x:n.targetTouches[0].clientX,y:n.targetTouches[0].clientY};if(!t.isInteractive||!t.wheelHitTest(s))return;n.preventDefault(),t.dragStart(s),e.addEventListener("touchmove",r),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a);function r(h={}){h.preventDefault(),t.dragMove({x:h.targetTouches[0].clientX,y:h.targetTouches[0].clientY})}function a(h={}){h.preventDefault(),e.removeEventListener("touchmove",r),e.removeEventListener("touchend",a),e.removeEventListener("touchcancel",a),t.dragEnd()}},"PointerEvent"in window?(e.addEventListener("pointerdown",t._handler_onPointerDown),e.addEventListener("pointermove",t._handler_onPointerMoveRefreshCursor)):(e.addEventListener("touchstart",t._handler_onTouchStart),e.addEventListener("mousedown",t._handler_onMouseDown),e.addEventListener("mousemove",t._handler_onMouseMoveRefreshCursor)),t._handler_onResize=t.resize.bind(t),window.addEventListener("resize",t._handler_onResize);let i=()=>{t.resize(),matchMedia(`(resolution: ${pr}dppx)`).addEventListener("change",i,{once:!0})}}function B(t={}){let e=t.canvas;"PointerEvent"in window?(e.removeEventListener("pointerdown",t._handler_onPointerDown),e.removeEventListener("pointermove",t._handler_onPointerMoveRefreshCursor)):(e.removeEventListener("touchstart",t._handler_onTouchStart),e.removeEventListener("mousedown",t._handler_onMouseDown),e.removeEventListener("mousemove",t._handler_onMouseMoveRefreshCursor)),window.removeEventListener("resize",t._handler_onResize)}var v=class{constructor(e,i={}){if(!c(e))throw"wheel parameter must be an Object";if(!c(i)&&i!==null)throw"props parameter must be an Object or null";this._wheel=e;for(let n of Object.keys(o.item))this["_"+n]=o.item[n];i?this.init(i):this.init(o.item)}init(e={}){this.backgroundColor=e.backgroundColor,this.image=e.image,this.imageRadius=e.imageRadius,this.imageRotation=e.imageRotation,this.imageScale=e.imageScale,this.label=e.label,this.labelColor=e.labelColor,this.value=e.value,this.weight=e.weight}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){typeof e=="string"?this._backgroundColor=e:this._backgroundColor=o.item.backgroundColor,this._wheel.refresh()}get image(){return this._image}set image(e){typeof e=="string"?(this._image=new Image,this._image.src=e,this._image.onload=i=>this._wheel.refresh(),this._image.onerror=i=>(this._image.error=!0,!0)):this._image=o.item.image,this._wheel.refresh()}get imageRadius(){return this._imageRadius}set imageRadius(e){typeof e=="number"?this._imageRadius=e:this._imageRadius=o.item.imageRadius,this._wheel.refresh()}get imageRotation(){return this._imageRotation}set imageRotation(e){typeof e=="number"?this._imageRotation=e:this._imageRotation=o.item.imageRotation,this._wheel.refresh()}get imageScale(){return this._imageScale}set imageScale(e){typeof e=="number"?this._imageScale=e:this._imageScale=o.item.imageScale,this._wheel.refresh()}get label(){return this._label}set label(e){typeof e=="string"?this._label=e:this._label=o.item.label,this._wheel.refresh()}get labelColor(){return this._labelColor}set labelColor(e){typeof e=="string"?this._labelColor=e:this._labelColor=o.item.labelColor,this._wheel.refresh()}get value(){return this._value}set value(e){this._value=e}get weight(){return this._weight}set weight(e){typeof e=="number"?this._weight=e:this._weight=o.item.weight}getCenterAngle(){let e=this._wheel.getItemAngles()[this.getIndex()];return e.start+(e.end-e.start)/2}getIndex(){return this._wheel.items.findIndex(e=>e===this)}getStartAngle(){return this._wheel.getItemAngles()[this.getIndex()].start}getEndAngle(){return this._wheel.getItemAngles()[this.getIndex()].end}getRandomAngle(){return M(this.getStartAngle(),this.getEndAngle())}};var Fe=K(W(),1);var j=class{constructor(e,i={}){if(this._frameRequestId=null,!(e instanceof Element))throw"container parameter must be an Element";if(!c(i)&&i!==null)throw"props parameter must be an Object or null";this._canvasContainer=e,this.canvas=document.createElement("canvas"),this._context=this.canvas.getContext("2d"),this.addCanvas(),k(this);for(let n of Object.keys(o.wheel))this["_"+n]=o.wheel[n];i?this.init(i):this.init(o.wheel)}init(e={}){this._isInitialising=!0,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth,this.debug=e.debug,this.image=e.image,this.isInteractive=e.isInteractive,this.itemBackgroundColors=e.itemBackgroundColors,this.itemLabelAlign=e.itemLabelAlign,this.itemLabelBaselineOffset=e.itemLabelBaselineOffset,this.itemLabelColors=e.itemLabelColors,this.itemLabelFont=e.itemLabelFont,this.itemLabelFontSizeMax=e.itemLabelFontSizeMax,this.itemLabelRadius=e.itemLabelRadius,this.itemLabelRadiusMax=e.itemLabelRadiusMax,this.itemLabelRotation=e.itemLabelRotation,this.items=e.items,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.pixelRatio=e.pixelRatio,this.rotationSpeedMax=e.rotationSpeedMax,this.radius=e.radius,this.rotation=e.rotation,this.rotationResistance=e.rotationResistance,this.rotationSpeed=e.rotationSpeed,this.offset=e.offset,this.onCurrentIndexChange=e.onCurrentIndexChange,this.onRest=e.onRest,this.onSpin=e.onSpin,this.overlayImage=e.overlayImage,this.pointerAngle=e.pointerAngle}addCanvas(){this._canvasContainer.appendChild(this.canvas)}removeCanvas(){this._canvasContainer.removeChild(this.canvas)}remove(){window.cancelAnimationFrame(this._frameRequestId),B(this),this.removeCanvas()}resize(){let[e,i]=[this._canvasContainer.clientWidth*this.getActualPixelRatio(),this._canvasContainer.clientHeight*this.getActualPixelRatio()],n=Math.min(e,i),s={w:n-n*this.offset.w,h:n-n*this.offset.h},r=Math.min(e/s.w,i/s.h);this._size=Math.max(s.w*r,s.h*r),this.canvas.style.width=this._canvasContainer.clientWidth+"px",this.canvas.style.height=this._canvasContainer.clientHeight+"px",this.canvas.width=e,this.canvas.height=i,this._center={x:e/2+e*this.offset.w,y:i/2+i*this.offset.h},this._actualRadius=this._size/2*this.radius,this.itemLabelFontSize=this.itemLabelFontSizeMax*(this._size/500),this.labelMaxWidth=this._actualRadius*(this.itemLabelRadius-this.itemLabelRadiusMax);for(let a of this._items)this.itemLabelFontSize=Math.min(this.itemLabelFontSize,A(a.label,this.itemLabelFont,this.labelMaxWidth,this._context));this.refresh()}draw(e=0){this._frameRequestId=null;let i=this._context;i.clearRect(0,0,this.canvas.width,this.canvas.height),this.animateRotation(e);let n=this.getItemAngles(this.rotation),s=this.getActualBorderWidth();i.textBaseline="middle",i.textAlign=this.itemLabelAlign,i.font=this.itemLabelFontSize+"px "+this.itemLabelFont,i.save();for(let[r,a]of n.entries()){let h=new Path2D;h.moveTo(this._center.x,this._center.y),h.arc(this._center.x,this._center.y,this._actualRadius-s/2,u(a.start+-90),u(a.end+-90)),this._items[r].path=h}this.drawItemBackgrounds(i,n),this.drawItemImages(i,n),this.drawItemLines(i,n),this.drawItemLabels(i,n),this.drawBorder(i),this.drawImage(i,this.image,!1),this.drawImage(i,this.overlayImage,!0),this.drawPointerLine(i),this.drawDragEvents(i),this._isInitialising=!1}drawItemBackgrounds(e,i=[]){var n;for(let[s,r]of i.entries()){let a=this._items[s];e.fillStyle=(n=a.backgroundColor)!=null?n:this.itemBackgroundColors[s%this.itemBackgroundColors.length],e.fill(a.path)}}drawItemImages(e,i=[]){for(let[n,s]of i.entries()){let r=this._items[n];if(!r.image||!r.image.complete||r.image.error)continue;e.save(),e.clip(r.path);let a=s.start+(s.end-s.start)/2;e.translate(this._center.x+Math.cos(u(a+-90))*(this._actualRadius*r.imageRadius),this._center.y+Math.sin(u(a+-90))*(this._actualRadius*r.imageRadius)),e.rotate(u(a+r.imageRotation));let h=this._size/500*r.image.width*r.imageScale,g=this._size/500*r.image.height*r.imageScale,Q=-h/2,H=-g/2;e.drawImage(r.image,Q,H,h,g),e.restore()}}drawImage(e,i,n=!1){if(!i)return;e.translate(this._center.x,this._center.y),n||e.rotate(u(this.rotation));let s=n?this._size:this._size*this.radius,r=-(s/2);e.drawImage(i,r,r,s,s),e.resetTransform()}drawPointerLine(e,i,n=!1){!this.debug||(e.translate(this._center.x,this._center.y),e.rotate(u(this.pointerAngle+-90)),e.beginPath(),e.moveTo(0,0),e.lineTo(this._actualRadius*2,0),e.strokeStyle=m.pointerLineColor,e.lineWidth=2,e.stroke(),e.resetTransform())}drawBorder(e){if(this.borderWidth<=0)return;let i=this.getActualBorderWidth();e.beginPath(),e.strokeStyle=this.borderColor,e.lineWidth=i,e.arc(this._center.x,this._center.y,this._actualRadius-i/2,0,2*Math.PI),e.stroke(),this.debug&&(e.beginPath(),e.strokeStyle=e.strokeStyle=m.labelRadiusColor,e.lineWidth=1,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadius,0,2*Math.PI),e.stroke(),e.beginPath(),e.strokeStyle=e.strokeStyle=m.labelRadiusColor,e.lineWidth=1,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadiusMax,0,2*Math.PI),e.stroke())}drawItemLines(e,i=[]){if(this.lineWidth<=0)return;let n=this.lineWidth/500*this._size,s=this.getActualBorderWidth();e.translate(this._center.x,this._center.y);for(let r of i)e.rotate(u(r.start+-90)),e.beginPath(),e.moveTo(0,0),e.lineTo(this._actualRadius-s,0),e.strokeStyle=this.lineColor,e.lineWidth=n,e.stroke(),e.rotate(-u(r.start+-90));e.resetTransform()}drawItemLabels(e,i=[]){var s;let n=this.itemLabelFontSize*-this.itemLabelBaselineOffset;for(let[r,a]of i.entries()){let h=this._items[r];if(!h.label)continue;e.save(),e.clip(h.path);let g=a.start+(a.end-a.start)/2;e.translate(this._center.x+Math.cos(u(g+-90))*(this._actualRadius*this.itemLabelRadius),this._center.y+Math.sin(u(g+-90))*(this._actualRadius*this.itemLabelRadius)),e.rotate(u(g+-90)),e.rotate(u(this.itemLabelRotation)),this.debug&&(e.beginPath(),e.moveTo(0,0),e.lineTo(-this.labelMaxWidth,0),e.strokeStyle=m.labelOutlineColor,e.lineWidth=1,e.stroke(),e.strokeRect(0,-this.itemLabelFontSize/2,-this.labelMaxWidth,this.itemLabelFontSize)),e.fillStyle=(s=h.labelColor)!=null?s:this.itemLabelColors[r%this.itemLabelColors.length],e.fillText(h.label,0,n),e.restore()}}drawDragEvents(e){var n;if(!this.debug||!((n=this.dragEvents)!=null&&n.length))return;let i=[...this.dragEvents].reverse();for(let[s,r]of i.entries()){let a=s/this.dragEvents.length*100;e.beginPath(),e.arc(r.x,r.y,5,0,2*Math.PI),e.fillStyle=`hsl(${m.dragEventHue},100%,${a}%)`,e.strokeStyle="#000",e.lineWidth=.5,e.fill(),e.stroke()}}animateRotation(e=0){if(this._spinToTimeEnd){if(e>=this._spinToTimeEnd){this.rotation=this._spinToAngleEnd,this._spinToTimeEnd=void 0,this.raiseEvent_onRest();return}this.rotationSpeed=0,this.refresh();let i=this._spinToTimeEnd-this._spinToTimeStart,n=(e-this._spinToTimeStart)/i;n=n<0?0:n;let s=this._spinToAngleEnd-this._spinToAngleStart;this.rotation=this._spinToAngleStart+s*this._spinToEasingFunction(n);return}if(this.rotationSpeed!==0){this.refresh(),this._lastFrameTime===void 0&&(this._lastFrameTime=e);let i=e-this._lastFrameTime;i>0&&(this.rotation+=i/1e3*this.rotationSpeed%360,this.rotationSpeed=this.getRotationSpeedPlusDrag(i),this.rotationSpeed===0&&this.raiseEvent_onRest(),this._lastFrameTime=e);return}this._lastFrameTime=void 0}getRotationSpeedPlusDrag(e=0){let i=this.rotationSpeed+this.rotationResistance*(e/1e3)*this._rotationDirection;return this._rotationDirection===1&&i<0||this._rotationDirection===-1&&i>=0?0:i}spin(e=0,i=0){let n=i/2;this.rotationSpeed=y(e*(1-n),e*(1+n)),this.rotationSpeed!==0&&this.raiseEvent_onSpin()}spinToAngle(e=0,i=0,n=null){this._spinToAngleStart=this.rotation,this._spinToAngleEnd=e,this._spinToTimeStart=performance.now(),this._spinToTimeEnd=this._spinToTimeStart+i,this._spinToEasingFunction=n||P,this.refresh()}spinToItem(e=0,i=0,n=!0,s=1,r=1,a=null){let h;n?h=w.items[e].getCenterAngle():h=w.items[e].getRandomAngle();let g=this.calcSpinToAngle(h,this.rotation,s,r);this.spinToAngle(g,i,a)}calcSpinToAngle(e=0,i=0,n=0,s){let r=(360-s*Math.abs((i%360+e)%360))%360;return r+=n*360,r*=s,r+i}stopSpin(){this.rotationSpeed=0,this._spinToTimeEnd=void 0}getActualBorderWidth(){return this.borderWidth/500*this._size}getActualPixelRatio(){return this.pixelRatio!==0?this.pixelRatio:window.devicePixelRatio}wheelHitTest(e={x:0,y:0}){let i=b(e,this.canvas,this.getActualPixelRatio());return E(i,this._center.x,this._center.y,this._actualRadius)}refreshCursor(){if(this.isDragging){this.canvas.style.cursor="grabbing";return}if(this.isInteractive&&this.isCursorOverWheel){this.canvas.style.cursor="grab";return}this.canvas.style.cursor=null}getAngleFromCenter(e={x:0,y:0}){return(T(this._center.x,this._center.y,e.x,e.y)+90)%360}getCurrentIndex(){return this._currentIndex}refreshCurrentIndex(e=[]){this._items.length===0&&(this._currentIndex=-1);for(let[i,n]of e.entries())if(!!x(this.pointerAngle,n.start%360,n.end%360)){if(this._currentIndex===i)break;this._currentIndex=i,this._isInitialising||this.raiseEvent_onCurrentIndexChange();break}}getItemAngles(e=0){let i=0;for(let h of this.items)i+=h.weight;let n=360/i,s,r=e,a=[];for(let h of this._items)s=h.weight*n,a.push({start:r,end:r+s}),r+=s;return this._items.length>1&&(a[a.length-1].end=a[0].start+360),a}refresh(){this._frameRequestId===null&&(this._frameRequestId=window.requestAnimationFrame(this.draw.bind(this)))}get borderColor(){return this._borderColor}set borderColor(e){typeof e=="string"?this._borderColor=e:this._borderColor=o.wheel.borderColor,this.refresh()}get borderWidth(){return this._borderWidth}set borderWidth(e){typeof e=="number"?this._borderWidth=e:this._borderWidth=o.wheel.borderWidth,this.refresh()}get debug(){return this._debug}set debug(e){typeof e=="boolean"?this._debug=e:this._debug=o.wheel.debug,this.refresh()}get image(){return this._image}set image(e){typeof e=="string"?(this._image=new Image,this._image.src=e,this._image.onload=i=>this.refresh()):this._image=o.wheel.image,this.refresh()}get isInteractive(){return this._isInteractive}set isInteractive(e){typeof e=="boolean"?this._isInteractive=e:this._isInteractive=o.wheel.isInteractive,this.refresh()}get itemBackgroundColors(){return this._itemBackgroundColors}set itemBackgroundColors(e){Array.isArray(e)?this._itemBackgroundColors=e:this._itemBackgroundColors=o.wheel.itemBackgroundColors,this.refresh()}get itemLabelAlign(){return this._itemLabelAlign}set itemLabelAlign(e){typeof e=="string"?this._itemLabelAlign=e:this._itemLabelAlign=o.wheel.itemLabelAlign,this.refresh()}get itemLabelBaselineOffset(){return this._itemLabelBaselineOffset}set itemLabelBaselineOffset(e){typeof e=="number"?this._itemLabelBaselineOffset=e:this._itemLabelBaselineOffset=o.wheel.itemLabelBaselineOffset,this.resize()}get itemLabelColors(){return this._itemLabelColors}set itemLabelColors(e){Array.isArray(e)?this._itemLabelColors=e:this._itemLabelColors=o.wheel.itemLabelColors,this.refresh()}get itemLabelFont(){return this._itemLabelFont}set itemLabelFont(e){typeof e=="string"?this._itemLabelFont=e:this._itemLabelFont=o.wheel.itemLabelFont,this.resize()}get itemLabelFontSizeMax(){return this._itemLabelFontSizeMax}set itemLabelFontSizeMax(e){typeof e=="number"?this._itemLabelFontSizeMax=e:this._itemLabelFontSizeMax=o.wheel.itemLabelFontSizeMax,this.resize()}get itemLabelRadius(){return this._itemLabelRadius}set itemLabelRadius(e){typeof e=="number"?this._itemLabelRadius=e:this._itemLabelRadius=o.wheel.itemLabelRadius,this.resize()}get itemLabelRadiusMax(){return this._itemLabelRadiusMax}set itemLabelRadiusMax(e){typeof e=="number"?this._itemLabelRadiusMax=e:this._itemLabelRadiusMax=o.wheel.itemLabelRadiusMax,this.resize()}get itemLabelRotation(){return this._itemLabelRotation}set itemLabelRotation(e){typeof e=="number"?this._itemLabelRotation=e:this._itemLabelRotation=o.wheel.itemLabelRotation,this.refresh()}get items(){return this._items}set items(e){if(Array.isArray(e)){this._items=[];for(let i of e)this._items.push(new v(this,{backgroundColor:i.backgroundColor,image:i.image,imageRadius:i.imageRadius,imageRotation:i.imageRotation,imageScale:i.imageScale,label:i.label,labelColor:i.labelColor,value:i.value,weight:i.weight}))}else this._items=o.wheel.items;this.refreshCurrentIndex(this.getItemAngles(this.rotation))}get lineColor(){return this._lineColor}set lineColor(e){typeof e=="string"?this._lineColor=e:this._lineColor=o.wheel.lineColor,this.refresh()}get lineWidth(){return this._lineWidth}set lineWidth(e){typeof e=="number"?this._lineWidth=e:this._lineWidth=o.wheel.lineWidth,this.refresh()}get radius(){return this._radius}set radius(e){typeof e=="number"?this._radius=e:this._radius=o.wheel.radius,this.resize()}get rotation(){return this._rotation}set rotation(e){typeof e=="number"?this._rotation=e:this._rotation=o.wheel.rotation,this.refreshCurrentIndex(this.getItemAngles(this.rotation)),this.refresh()}get rotationResistance(){return this._rotationResistance}set rotationResistance(e){typeof e=="number"?this._rotationResistance=e:this._rotationResistance=o.wheel.rotationResistance}get pixelRatio(){return this._pixelRatio}set pixelRatio(e){typeof e=="number"?this._pixelRatio=e:this._pixelRatio=o.wheel.pixelRatio,this.resize()}get rotationSpeed(){return this._rotationSpeed}set rotationSpeed(e){if(typeof e=="number"){let i=Math.min(e,this.rotationSpeedMax);i=Math.max(i,-this.rotationSpeedMax),this._rotationDirection=i>0?1:-1,this._rotationSpeed=i}else this._rotationDirection=0,this._rotationSpeed=o.wheel.rotationSpeed;this.refresh()}get rotationSpeedMax(){return this._rotationSpeedMax}set rotationSpeedMax(e){typeof e=="number"?this._rotationSpeedMax=e:this._rotationSpeedMax=o.wheel.rotationSpeedMax}get offset(){return this._offset}set offset(e){e?this._offset=e:this._offset=o.wheel.offset,this.resize()}get onCurrentIndexChange(){return this._onCurrentIndexChange}set onCurrentIndexChange(e){typeof e=="function"?this._onCurrentIndexChange=e:this._onCurrentIndexChange=o.wheel.onCurrentIndexChange}get onRest(){return this._onRest}set onRest(e){typeof e=="function"?this._onRest=e:this._onRest=o.wheel.onRest}get onSpin(){return this._onSpin}set onSpin(e){typeof e=="function"?this._onSpin=e:this._onSpin=o.wheel.onSpin}get overlayImage(){return this._overlayImage}set overlayImage(e){typeof e=="string"?(this._overlayImage=new Image,this._overlayImage.src=e,this._overlayImage.onload=i=>this.refresh()):this._overlayImage=o.wheel.overlayImage,this.refresh()}get pointerAngle(){return this._pointerAngle}set pointerAngle(e){typeof e=="number"?this._pointerAngle=e:this._pointerAngle=o.wheel.pointerAngle,this.debug&&this.refresh()}dragStart(e={x:0,y:0}){let i=b(e,this.canvas,this.getActualPixelRatio());this.isDragging=!0,this.stopSpin(),this.dragEvents=[{distance:0,x:i.x,y:i.y,now:performance.now()}],this.refreshCursor()}dragMove(e={x:0,y:0}){let i=b(e,this.canvas,this.getActualPixelRatio()),n=this.getAngleFromCenter(i),s=this.dragEvents[0],r=this.getAngleFromCenter(s),a=O(r,n);this.dragEvents.unshift({distance:a,x:i.x,y:i.y,now:performance.now()}),this.debug&&this.dragEvents.length>=40&&this.dragEvents.pop(),this.rotation+=a}dragEnd(){this.isDragging=!1;let e=0,i=performance.now();for(let[n,s]of this.dragEvents.entries()){if(!this.isDragEventTooOld(i,s)){e+=s.distance;continue}this.dragEvents.length=n;break}this.refreshCursor(),e!==0&&(this.rotationSpeed=e*(1e3/250),this.raiseEvent_onSpin({dragEvents:this.dragEvents}))}isDragEventTooOld(e=0,i={}){return e-i.now>250}raiseEvent_onCurrentIndexChange(e={}){var i;(i=this.onCurrentIndexChange)==null||i.call(this,_({type:"currentIndexChange",currentIndex:this._currentIndex},e))}raiseEvent_onRest(e={}){var i;(i=this.onRest)==null||i.call(this,_({type:"rest",currentIndex:this._currentIndex,rotation:this._rotation},e))}raiseEvent_onSpin(e={}){var i;(i=this.onSpin)==null||i.call(this,_({type:"spin",rotationSpeed:this.rotationSpeed},e))}};export{j as Wheel};
